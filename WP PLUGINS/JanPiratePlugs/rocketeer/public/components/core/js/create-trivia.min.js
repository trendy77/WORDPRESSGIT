!function(e,s){CKEDITOR.replace("inputPageContent");var i=new Vue({el:"#createTriviaForm",data:{media_type:0,images:[],image_ids:[],question_index:0,result_index:0,questions:[],results:[]},methods:{addQuestion:function(e){this.questions.push({question:"Question #"+(this.questions.length+1),media_type:0,explanation:"",answer_display_type:1,images:[],embed_url:null,embed_code:null,quote:null,quote_src:null,answers:[]})},removeQuestion:function(e){return confirm(are_you_sure_message)?void this.questions.splice(e,1):null},updateQuestionIndex:function(e,s){s.preventDefault(),this.question_index=e},addAnswer:function(e){this.questions[this.question_index].answers.push({answer:null,img:0,isCorrect:1})},removeAnswer:function(e,s){this.questions[this.question_index].answers.splice(e,1)},addResult:function(e){this.results.push({title:"Result",desc:null,main_img:0,min:0,max:0})},removeResult:function(e){return confirm(are_you_sure_message)?void this.results.splice(e,1):null},updateResultIndex:function(e,s){s.preventDefault(),this.result_index=e}}}),t=new Dropzone("#imgDropzone",{url:ajaxurl+"/process/upload-media-img",previewsContainer:"#imgPreviewCtr",acceptedFiles:"image/*",paramName:"img",previewTemplate:'<div class="dz-preview dz-file-preview"><div class="dz-details"><div class="dz-filename"><span data-dz-name></span></div><div class="progress"><div class="progress-bar progress-bar-info progress-bar-striped active" data-dz-uploadprogress></div></div></div>'});t.on("sending",function(s,i,t){t.append("_token",e("input[name=_token]").val())}),t.on("error",function(e,s,i){console.log(s,i),toastr.error(img_upload_error_message)}),t.on("success",function(s,t){return e(s.previewElement).remove(),1==t.status?void toastr.error(img_upload_error_message):(i.images.push({id:t.img.id,name:t.img.name}),i.image_ids.push(t.img.id),void toastr.success(file_upload_success,simple_success_message))}),e(document).on("submit","#createTriviaForm",function(s){s.preventDefault(),e("#alertStatus").html('<div class="alert alert-info">'+processing_message+"</div>");var t={_token:e("input[name=_token]").val(),title:e("#inputTitle").val(),desc:e("#inputDesc").val(),cid:e("#inputCid").val(),nsfw:e("#inputNSFW").val(),page_content:CKEDITOR.instances.inputPageContent.getData(),style:e("#inputStyle").val(),animation:e("#inputAnimation").val(),thumbnail:e("#inputThumbnail").val(),questions:i.$get("questions"),results:i.$get("results"),timed_quiz:e("#inputTimedQuiz").val(),timed_seconds:e("#inputTimedSeconds").val(),randomize_questions:e("#inputRandomizeQuestions").val(),randomize_answers:e("#inputRandomizeAnswers").val(),show_correct_answer:e("#inputShowCorrectAnswer").val(),image_ids:i.$get("image_ids")};e(this).slideUp("fast",function(){e.post("",t).always(function(s){2==s.status?2==s.is_approved?(e("#alertStatus").html('<div class="alert alert-success">'+success_message+"</div>"),location.href=s.url):e("#alertStatus").html('<div class="alert alert-success">'+pending_success_message+"</div>"):(e("#createTriviaForm").slideDown("fast"),e("#alertStatus").html('<div class="alert alert-danger">'+unable_submission+" <ul></ul></div>"),s.errors.forEach(function(s,i,t){e("#alertStatus").find("ul").append("<li>"+s+"</li>")}))})})})}(jQuery,window);