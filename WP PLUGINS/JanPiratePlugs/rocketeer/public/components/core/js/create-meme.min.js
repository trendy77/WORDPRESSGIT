!function(e,t){CKEDITOR.replace("inputPageContent");var a=document.getElementById("memeCanvas"),n="",i=new Vue({el:"#createMemeForm",data:{img_loaded:!1,top_caption:"",bottom_caption:"",img_type:1,meme_id:0},methods:{updateMemeTxt:function(e){e.preventDefault(),Meme(n,a,this.top_caption,this.bottom_caption)}}});e(document).on("click",".memeSelectCtr",function(t){t.preventDefault(),n=e(this).find("img").attr("src"),Meme(n,a,i.$get("top_caption"),i.$get("bottom_caption")),i.img_loaded=!0,i.img_type=1,i.meme_id=e(this).data("mid")}),e(document).on("click","#uplImgBtn",function(t){t.preventDefault(),e("#inputImgSrc").click()}),e(document).on("change","#inputImgSrc",function(t){t.preventDefault();var p=e(this).prop("files")[0];if(!p)return null;var o=new FileReader;o.onload=function(e){n=e.target.result,Meme(n,a,i.$get("top_caption"),i.$get("bottom_caption")),i.img_loaded=!0,i.img_type=2},o.readAsDataURL(p)}),e(document).on("submit","#createMemeForm",function(t){t.preventDefault(),e("#alertStatus").html('<div class="alert alert-info">'+processing_message+"</div>");var n=new FormData;e("#inputImgSrc").prop("files");n.append("_token",e("input[name=_token]").val()),n.append("title",e("#inputTitle").val()),n.append("desc",e("#inputDesc").val()),n.append("cid",e("#inputCid").val()),n.append("nsfw",e("#inputNSFW").val()),n.append("page_content",CKEDITOR.instances.inputPageContent.getData()),n.append("type",i.img_type),n.append("meme_data",a.toDataURL("image/png")),n.append("top_caption",i.top_caption),n.append("bottom_caption",i.bottom_caption),n.append("meme_id",i.meme_id),n.append("img_type",i.img_type),2==i.img_type&&(console.log("swag"),n.append("upl_img",e("#inputImgSrc").prop("files")[0])),e(this).slideUp("fast",function(){e.ajax({url:"",type:"POST",data:n,cache:!1,contentType:!1,processData:!1}).always(function(t){console.log(t),2==t.status?2==t.is_approved?(e("#alertStatus").html('<div class="alert alert-success">'+success_message+"</div>"),location.href=t.url):e("#alertStatus").html('<div class="alert alert-success">'+pending_success_message+"</div>"):(e("#createMemeForm").slideDown("fast"),e("#alertStatus").html('<div class="alert alert-danger">'+unable_submission+" <ul></ul></div>"),t.errors.forEach(function(t,a,n){e("#alertStatus").find("ul").append("<li>"+t+"</li>")}))})})})}(jQuery,window);