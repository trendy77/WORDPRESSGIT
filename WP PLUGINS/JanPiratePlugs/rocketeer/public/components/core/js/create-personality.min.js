!function(e,s){CKEDITOR.replace("inputPageContent");var t=new Vue({el:"#createPersonalityForm",data:{media_type:0,images:[],question_index:0,result_index:0,questions:[],results:[],image_ids:[]},methods:{addQuestion:function(e){this.questions.push({question:"Question #"+(this.questions.length+1),media_type:0,answer_display_type:1,images:[],embed_url:null,embed_code:null,quote:null,quote_src:null,answers:[]})},removeQuestion:function(e){return confirm(are_you_sure_message)?void this.questions.splice(e,1):null},updateQuestionIndex:function(e,s){s.preventDefault(),this.question_index=e},addAnswer:function(e){this.questions[this.question_index].answers.push({answer:null,img:0,points:0})},removeAnswer:function(e,s){this.questions[this.question_index].answers.splice(e,1)},addResult:function(e){this.results.push({title:"Result",desc:null,main_img:0,min:0,max:0})},removeResult:function(e){return confirm(are_you_sure_message)?void this.results.splice(e,1):null},updateResultIndex:function(e,s){s.preventDefault(),this.result_index=e}}}),i=new Dropzone("#imgDropzone",{url:ajaxurl+"/process/upload-media-img",previewsContainer:"#imgPreviewCtr",acceptedFiles:"image/*",paramName:"img",previewTemplate:'<div class="dz-preview dz-file-preview"><div class="dz-details"><div class="dz-filename"><span data-dz-name></span></div><div class="progress"><div class="progress-bar progress-bar-info progress-bar-striped active" data-dz-uploadprogress></div></div></div>'});i.on("sending",function(s,t,i){i.append("_token",e("input[name=_token]").val())}),i.on("error",function(e,s,t){console.log(s,t),toastr.error(img_upload_error_message)}),i.on("success",function(s,i){return e(s.previewElement).remove(),1==i.status?void toastr.error(img_upload_error_message):(t.images.push({id:i.img.id,name:i.img.name}),t.image_ids.push(i.img.id),void toastr.success(file_upload_success,simple_success_message))}),e(document).on("submit","#createPersonalityForm",function(s){s.preventDefault(),e("#alertStatus").html('<div class="alert alert-info">'+processing_message+"</div>");var i={_token:e("input[name=_token]").val(),title:e("#inputTitle").val(),desc:e("#inputDesc").val(),cid:e("#inputCid").val(),nsfw:e("#inputNSFW").val(),page_content:CKEDITOR.instances.inputPageContent.getData(),thumbnail:e("#inputThumbnail").val(),questions:t.$get("questions"),results:t.$get("results"),style:e("#inputStyle").val(),animation:e("#inputAnimation").val(),randomize_questions:e("#inputRandomizeQuestions").val(),randomize_answers:e("#inputRandomizeAnswers").val(),image_ids:t.$get("image_ids")};e(this).slideUp("fast",function(){e.post("",i).always(function(s){console.log(s),2==s.status?2==s.is_approved?(e("#alertStatus").html('<div class="alert alert-success">'+success_message+"</div>"),location.href=s.url):e("#alertStatus").html('<div class="alert alert-success">'+pending_success_message+"</div>"):(e("#createPersonalityForm").slideDown("fast"),e("#alertStatus").html('<div class="alert alert-danger">'+unable_submission+" <ul></ul></div>"),s.errors.forEach(function(s,t,i){e("#alertStatus").find("ul").append("<li>"+s+"</li>")}))})})})}(jQuery,window);